# SSR, CSR

## SSR(Server Side Rendering)

말 그대로 서버쪽에서 렌더링 준비를 끝마친 상태로 클라이언트에 전달하는 방식입니다.

![image](https://user-images.githubusercontent.com/32887635/192082366-7d15ce32-b721-4689-bbae-c303dfe6ad8f.png)

사진처럼 서버에서 랜더 가능한 상태로 전달해주기 때문에 사용자는 interact하기 전에 미리 볼수 있습니다.(viewable)

### SSR 단계

SSR의 좀 더 자세한 단계를 설명해보려고 합니다.

![image](https://user-images.githubusercontent.com/32887635/192082414-99ea58ec-fcba-42e0-b020-143eb5be3907.png)

1. User가 Website 요청을 보냅니다.
2. Server는 'Ready to Render'. 즉, 즉시 렌더링 가능한 html파일을 만듭니다.
   (리소스 체크, 컴파일 후 완성된 HTML 컨텐츠로 만든다.)
3. 클라이언트에 전달되는 순간, 이미 렌더링 준비가 되어있기 때문에 HTML은 **즉시 렌더링** 된니다. 그러나 사이트 자체는 **조작 불가능**합니다. (Javascript가 읽히기 전이기 때문)
4. 클라이언트가 자바스크립트를 다운받습니다.
5. 다운 받아지고 있는 사이에 유저는 **컨텐츠는 볼 수 있지만 사이트를 조작 할 수는 없습니다.** 이때의 사용자 **조작을 기억**하고 있습니다.
6. 브라우저가 Javascript 프레임워크를 실행합니다.
7. JS까지 성공적으로 컴파일 되었기 때문에 기억하고 있던 사용자 조작이 실행되고 이제 웹 페이지는 상호작용 가능해집니다.

## CSR(Client Side Rendering)

말 그대로 SSR과 달리 렌더링이 클라이언트 쪽에서 일어납니다. 즉, 서버는 요청을 받으면 클라이언트에 HTML과 JS를 그래도 보내줍니다. 그 후 클라이언트는 그것을 받아 렌더링을 시작합니다.

![image](https://user-images.githubusercontent.com/32887635/192082491-02a661e4-daaf-4a76-a49f-7dc3d78214dc.png)

사진처럼 서버에서 다른 처리 없이 그대로 보내주기 때문에 자바스크립트가 모두 다운로드 되고 실행이 끝나기 전까지는 사용자는 볼수 있는게 없습니다.

### CSR 단계

CSR의 좀 더 자세한 단계를 설명해보려고 합니다.

![image](https://user-images.githubusercontent.com/32887635/192082533-f98e9427-1669-48b9-9f69-7dd2b647caf9.png)

1. User가 Website 요청을 보냅니다.
2. CDN이 HTML 파일과 JS로 접근할 수 있는 링크를 클라이언트로 보냅니다.
   \*CDN : 엔드 유저의 요청에 '물리적'으로 가까운 서버에서 요청에 응답하는 방식

3. 클라이언트는 HTML과 JS를 다운로드 받습니다.
   (이때 SSR과 달리 유저는 아무것도 볼 수 없습니다.😡)
4. 다운이 완료된 JS가 실행됩니다.
5. 데이터를 위한 API가 호출됩니다.
   (이때 유저들은 placeholder를 보게된다. )
6. 서버가 API로부터의 요청에 응답합니다.
7. API로부터 받아온 data를 placeholder 자리에 넣어줍니다. 이제 페이지는 상호작용이 가능해집니다.

## SSR, CSR 비교

### 페이지 로딩시간

1. SSR: SSR은 필요한 부분의 HTML, Script만 불러오기 때문에 첫페이지 로딩시간은 빠르지만, 페이지 이동할 경우는 좀 더 느리다.

2. CSR: CSR은 모든 코드를 받아오기 때문에 첫 페이지 로딩시간은 느리지만 이동할때의 시간은 빠르다.

### SEO

SEO(Search Engine Optimization, SEO)라 불리는 검색엔진 최적화는 사용성 자체만큼 중요한 사항입니다. 우리는 특정 키워드를 검색할때 상위 노출된 컨텐츠에 쉽게 접근할 수 있는데, 이러한 검색엔진 결과 페이지에서 웹사이트 또는 웹페이지의 상위 노출도를 높이는 작업이 SEO입니다.

## 검색엔진 최적화를 위한 작업

상위 노출 컨텐츠를 제작하기 위해서는 검색엔진을 최적화 시켜주는 작업을 해야 합니다. 아래는 몇가지 검색엔진을 최적화 할수 있는 방안들입니다.

1. 메타 태그(Meta Tag)
2. 오픈 그래프(Open Graph) 태그

위의 방안을 위해서는 소스 코드 중에서 meatadata가 노출이 되어야 하는데, CSR은 자바스크립트를 실행시켜 동적으로 컨텐츠가 생성되기 때문에 자바스크립트가 실행 되어야 meatadata가 바뀌었기 때문에 따로 검색엔진 최적화를 해주어야 했습니다. \*구글크롤러는 자바스크립트를 읽어서 크롤링 하기 때문에 상관습니다.

### 서버 자원 사용

SSR이 서버 자원을 더 많이 사용합니다. 그 이유는 매번 서버에 요청을 하기 때문입니다.

## 사용 권장

### SSR

- 네트워크가 느릴 때 😓
  (CSR은 한번에 모든 것을 불러오지만 SSR은 각 페이지마다 나눠불러오기 때문)
- SEO(serach engine optimization : 검색 엔진 최적화)가 필요할 때.
  최초 로딩이 빨라야하는 사이트를 개발 할 때
- 메인 스크립트가 크고 로딩이 매우 느릴 때CSR은 메인스크립트가 로딩이 끝나면 API로 데이터 요청을 보낸다. 하지만 SSR은 한번의 요청에 아예 렌더가 가능한 페이지가 돌아온다.
- 웹 사이트가 상호작용이 별로 없을 때.

### CSR

- 네트워크가 빠를 때
- 서버의 성능이 좋지 않을 때
- 사용자에게 보여줘야 하는 데이터의 양이 많을 때.
  (로딩창을 띄울 수 있는 장점이 있다.)
- 메인 스크립트가 가벼울 때
  SEO 따윈 관심 없을 때😤
- 웹 어플리케이션에 사용자와 상호작용할 것들이 많을 때. (아예 렌더링 되지 않아서 사용자의 행동을 막는 것이 경험에 오히려 유리함.)
